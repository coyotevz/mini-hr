{% extends "layout.html" %}

{% block page_content %}
<div class="row">
  <div class="col-md-6">
    <h3>{{ employee.name }}</h3>
    <dl class="dl-horizontal">
      <dt>Fecha Nacimiento</dt>
      <dd>{{ employee.birth_date.strftime('%d-%b-%Y').title() }} ({{ employee.age.years }} años)</dd>
      <dt>C.U.I.L.</dt>
      <dd>{{ employee.cuil }}</dd>
      <dt>Fecha Ingreso</dt>
      <dd>{{ employee.hire_date.strftime('%d-%b-%Y').title() }} ({{ employee.seniority.years }} años y {{ employee.seniority.months }} meses)</dd>
      <dt>Código Reloj</dt>
      <dd>{{ employee.user_code }}</dd>
    </dl>
  </div>
  <div class="col-md-6">
    <table class="table table-condensed">
      <thead>
        <tr>
          <th>Día</th>
          <th>Entrada</th>
          <th>Salida</th>
        </tr>
      </thead>
      <tbody>
        {% set year = 2014 %}
        {% set month = 11 %}
        {% set lastday = None %}
        {% for (day, intervals) in fixed_records(employee.month_records(year, month), year, month) %}
        {% for interval in intervals %}
        <tr>
          {% if lastday != day %}
          <th{% if intervals|length > 1 %} rowspan="{{ intervals|length }}"{% endif %}>
            {{ day.strftime('%A %d').title() }}
          </th>
          {% endif %}
          <td{% if not interval.input %} class="danger"{% endif %}>{{ interval.input|d('Missing', true) }}</td>
          <td{% if not interval.output %} class="danger"{% endif %}>{{ interval.output|d('Missing', true) }}</td>
        </tr>
        {% set lastday = day %}
        {% endfor %}
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{# vim: ft=jinja:sw=2
#}
